<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Datos Personales</title>
</head>
<body>
    <form id="formularioDatosPersonales" style="margin-left: 20px">
        <fieldset>
            <legend>datos personales</legend>
            
            <div style="margin-bottom: 15px">
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" name="nombre" required>*

                <label for="primerApellido">Primer apellido:</label>
                <input type="text" id="primerApellido" name="primerApellido" required>*

                <label for="segundoApellido">Segundo apellido:</label>
                <input type="text" id="segundoApellido" name="segundoApellido" required>*
            </div>

            <div style="margin-bottom: 15px">
                <label for="direccion">Dirección:</label>
                <input 
                    type="text" 
                    id="direccion" 
                    name="direccion"
                    placeholder="calle o plaza, número y piso" 
                    required
                    size="50">
            </div>

            <div style="margin-bottom: 15px">
                <label for="telefono">Teléfono:</label>
                <input type="text"
                id="telefono"
                name="telefono"
                placeholder="123 33 33 33"
                required
                size="10">*
            </div>

            <div style="margin-bottom: 15px">
                <label for="email">E-mail:</label>
                <input type="text"
                id="email"
                name="email"
                placeholder="ejemplo@ejemplo.com"
                required
                size="35">*
            </div>

            <div style="margin-bottom: 15px">
                <label for="contrasena">Contraseña:</label>
                <input type="password"
                id="contrasena"
                name="contrasena"
                required
                size="20">*
            </div>

            <div> Sexo<br>
              <label>
                <input type="radio" id="varon" name="sexo" value="varon"> Varón
              </label>
              <br>
              <label>
                <input type="radio" id="mujer" name="sexo" value="mujer"> Mujer
              </label>
            </div>

        </fieldset>

        <fieldset>
            <legend>Nivel de estudios e intereses</legend>

            <div style="margin-bottom: 15px"> Nivel de estudios:<br>
                <input type="radio" id="certificado" name="estudios" value="certificado">
                <label for="certificado">Certificado escolar</label><br>
                <input type="radio" id="graduado" name="estudios" value="graduado">
                <label for="graduado">Graduado en E.S.O.</label><br>
                <input type="radio" id="bachiller" name="estudios" value="bachiller">
                <label for="bachiller">Bachiller - Formación Profesional</label><br>
                <input type="radio" id="diplomado" name="estudios" value="diplomado">
                <label for="diplomado">Diplomado</label><br>
                <input type="radio" id="licenciado" name="estudios" value="licenciado">
                <label for="licenciado">Licenciado o Doctorado</label><br>
            </div>
            
            
            <div> Recibir artículos sobre los siguientes temas:<br>
                <input type="checkbox" id="musica" name="articulos" value="musica">
                <label for="musica">Música</label><br>
                <input type="checkbox" id="deportes" name="articulos" value="deportes">
                <label for="deportes">Deportes</label><br>
                <input type="checkbox" id="cine" name="articulos" value="cine">
                <label for="cine">Cine</label><br>
                <input type="checkbox" id="libros" name="articulos" value="libros">
                <label for="libros">Libros</label><br>
                <input type="checkbox" id="ciencia" name="articulos" value="ciencia">
                <label for="ciencia">Ciencia</label><br>
            </div>
            

        </fieldset>

        <fieldset>
            <legend>Datos sobre la revista</legend>

            <div style="margin-bottom: 15px">
                <label for="frecuencia">Frecuencia con la que se recibirá la revista:</label><br>
                <select name="frecuencia" id="frecuencia">
                    <option value="semanal">Semanal</option>
                    <option value="mensual">Mensual</option>
                    <option value="diaria">Diaria</option>
                  </select>
            </div>

            <p>Puedes mandar tu artículo sobre cualquier tema de los que tratamos. Nosotros lo valoramos para que pueda ser publicado.</p>

           <div style="margin-bottom: 15px">
            <label for="file">Mandar artículo:</label>
            <input type="file" id="file" name="file"> 
           </div>

           <div>
            <label for="comentario">Si deseas mandar simplemente una opinión o comentario escribelo aquí:</label><br>
            <textarea id="comentario" name="comentario" rows="4" cols="50" placeholder="Escribe tu comentario..."></textarea>*
           </div>

        </fieldset>

        <fieldset>
            <legend>Comenzar de nuevo</legend>

            <div>
                <label>Borrar todos los datos del formulario y volver a empezar:</label><br>
                <input type="reset">
            </div>
        </fieldset>

        <fieldset>
            <legend>enviar</legend>

            <div>
                <label>Enviar formulario por correo electronico: Al pulsar el botón se abrirá la página de envío de correo: en esa página pulsa para enviar:</label><br>
                <button type="submit">Enviar por Correo</button>
            </div>

        </fieldset>
    </form>

    <script>
        function validacion(event) {
            // Detiene el comportamiento predeterminado del formulario (enviar datos y recargar la página). Esto permite realizar validaciones antes de proceder.
            event.preventDefault();
    
            let errores = []; // Es un array donde se almacenan mensajes de error para cada campo que no pase la validación.
            let primerCampoErroneo = null; //  Almacena el primer campo que presenta un error para poder enfocar automáticamente en él.
    
            // Validar Nombre
            let nombre = document.getElementById('nombre'); // Obtenemos el campo por su ID
            let nombrePattern = /^[a-zA-Z\s]+$/; // Definimos el patrón permitido (solo letras y espacios)
            if (!nombre.value.trim().match(nombrePattern)) {
                errores.push("El campo 'Nombre' solo puede contener letras y espacios."); // Agregamos un mensaje de error si no coincide
                if (!primerCampoErroneo) primerCampoErroneo = nombre; // Si es el primer error, lo almacenamos
            }
    
            // Validar Apellidos
            let primerApellido = document.getElementById('primerApellido');
            let segundoApellido = document.getElementById('segundoApellido');
            if (!primerApellido.value.trim().match(nombrePattern)) {
                errores.push("El campo 'Primer apellido' solo puede contener letras y espacios.");
                if (!primerCampoErroneo) primerCampoErroneo = primerApellido;
            }
            if (!segundoApellido.value.trim().match(nombrePattern)) {
                errores.push("El campo 'Segundo apellido' solo puede contener letras y espacios.");
                if (!primerCampoErroneo) primerCampoErroneo = segundoApellido;
            }
    
            // Validar Dirección
            let direccion = document.getElementById('direccion');
            let direccionPattern = /^(.+\s+\d+.*)$/;  // Debe contener una palabra seguida de un número
            if (!direccion.value.trim().match(direccionPattern)) {
                errores.push("El campo 'Dirección' debe incluir calle/plaza y número.");
                if (!primerCampoErroneo) primerCampoErroneo = direccion;
            }
    
            // Validar Teléfono
            let telefono = document.getElementById('telefono');
            let telefonoPattern = /^\d{3}\s\d{3}\s\d{3}$/; // Formato de tres grupos de tres numeros
            if (!telefono.value.trim().match(telefonoPattern)) {
                errores.push("El campo 'Teléfono' debe tener un formato válido (123 456 789).");
                if (!primerCampoErroneo) primerCampoErroneo = telefono;
            }
    
            // Validar Email
            let email = document.getElementById('email');
            let emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Formato estándar de correo
            if (!email.value.trim().match(emailPattern)) {
                errores.push("El campo 'E-mail' debe tener un formato válido (ejemplo@dominio.com).");
                if (!primerCampoErroneo) primerCampoErroneo = email;
            }
    
            // Validar Contraseña
            let contrasena = document.getElementById('contrasena');
            let contrasenaPattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/; // Debe tener al menos una letra, un numero y 6 caracteres
            if (!contrasena.value.trim().match(contrasenaPattern)) {
                errores.push("El campo 'Contraseña' debe tener al menos 6 caracteres, incluyendo una letra y un número.");
                if (!primerCampoErroneo) primerCampoErroneo = contrasena;
            }
    
            // Validar Comentarios (si están llenos)
            let comentario = document.getElementById('comentario');
            if (comentario.value.trim() && comentario.value.trim().length <= 10) { // Si hay un comentario debe tener al menos 10 caracteres
                errores.push("El comentario debe tener al menos 10 caracteres si se introduce.");
                if (!primerCampoErroneo) primerCampoErroneo = comentario;
            }
    
            // Mostrar errores si los hay
            if (errores.length > 0) {
                alert("Se encontraron los siguientes errores:\n\n" + errores.join("\n")); // Alerta con la lista de errores
                primerCampoErroneo.focus(); // Se centra en el primer campo erróneo
            } else {
                alert("Datos enviados correctamente."); // Si no hay errores
            }
        }
    
        // Asociar la función al botón de envío
        document.getElementById('formularioDatosPersonales').addEventListener('submit', validacion); // Llama a la función validacion cuando se intente enviar el formulario.
    </script>    
    
</body>
</html>